(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{845:(e,s,a)=>{Promise.resolve().then(a.bind(a,6261))},6261:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var i=a(2860),t=a(1084),l=a(3200);let n=[{id:"dish001",name:"鸡公煲",imageUrl:"images/jigongbao.jpg"},{id:"dish002",name:"宫保鸡丁",imageUrl:"images/gongbaojiding.jpg"},{id:"dish003",name:"水煮鱼",imageUrl:"images/shuizhuyu.jpg"},{id:"dish004",name:"麻婆豆腐",imageUrl:"images/mapodoufu.jpg"},{id:"dish005",name:"鱼香肉丝",imageUrl:"images/yuxiangrousi.jpg"},{id:"dish006",name:"酸菜鱼",imageUrl:"images/suancaiyu.jpg"}];function r(){let[e,s]=(0,l.useState)(n),[a,r]=(0,l.useState)([]),[d,c]=(0,l.useState)(!1),[o,m]=(0,l.useState)(""),h=e=>{a.find(s=>s.id===e.id)||r([...a,e])},g=e=>{r(a.filter(s=>s.id!==e))},x=async()=>{if(0===a.length){m("请至少选择一道菜品！"),setTimeout(()=>m(""),3e3);return}c(!0),m("");try{let e=await fetch("https://2mzhyi8c9gpw.manus.space/api/submit-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dishes:a.map(e=>e.name)})});if(e.ok){let s=await e.json();m(s.message||"订单提交成功！"),r([])}else{let s=await e.json();m(s.error||"订单提交失败，请稍后再试。")}}catch(e){console.error("Error submitting order:",e),m("订单提交过程中发生错误，请检查网络连接或联系管理员。")}finally{c(!1),setTimeout(()=>m(""),5e3)}};return(0,l.useEffect)(()=>{e.map(e=>(e.imageUrl.includes("placeholder")&&console.log("Dish ".concat(e.name," is using a placeholder image.")),e))},[e]),(0,i.jsxs)("div",{className:"container mx-auto p-4 min-h-screen bg-pink-50",children:[(0,i.jsx)("header",{className:"text-center py-8",children:(0,i.jsx)("h1",{className:"text-4xl font-bold text-pink-600",children:"\uD83D\uDC96 情侣点餐坊 \uD83D\uDC96"})}),(0,i.jsxs)("main",{className:"flex flex-col lg:flex-row gap-8",children:[(0,i.jsxs)("section",{className:"lg:w-2/3",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-pink-500",children:"可点菜品"}),0===e.length?(0,i.jsx)("p",{className:"text-gray-600",children:"暂无菜品提供，敬请期待！"}):(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:e.map(e=>(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer transform hover:scale-105 transition-transform duration-300 ease-in-out",onClick:()=>h(e),children:[(0,i.jsx)("div",{className:"relative w-full h-48 sm:h-56",children:(0,i.jsx)(t.default,{src:e.imageUrl,alt:e.name,layout:"fill",objectFit:"cover",onError:e=>{e.currentTarget.src="https://via.placeholder.com/300x200?text=Image+Not+Found"}})}),(0,i.jsx)("div",{className:"p-4 text-center",children:(0,i.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:e.name})})]},e.id))})]}),(0,i.jsxs)("aside",{className:"lg:w-1/3 bg-white p-6 rounded-xl shadow-lg",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-pink-500",children:"已点菜品"}),0===a.length?(0,i.jsx)("p",{className:"text-gray-500 italic",children:"亲，您还没点菜哦~"}):(0,i.jsx)("ul",{className:"space-y-3 mb-6",children:a.map((e,s)=>(0,i.jsxs)("li",{className:"flex justify-between items-center p-3 bg-pink-100 rounded-lg",children:[(0,i.jsxs)("span",{className:"text-gray-700 font-medium",children:[s+1,". ",e.name]}),(0,i.jsx)("button",{onClick:()=>g(e.id),className:"text-red-500 hover:text-red-700 font-semibold text-sm",children:"删除"})]},e.id))}),a.length>0&&(0,i.jsx)("button",{onClick:x,disabled:d,className:"w-full bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"正在提交...":"提交菜品"}),o&&(0,i.jsx)("p",{className:"mt-4 text-sm ".concat(o.includes("失败")||o.includes("错误")?"text-red-600":"text-green-600"),children:o})]})]}),(0,i.jsx)("footer",{className:"text-center py-8 mt-12 text-pink-500",children:(0,i.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," 为爱下厨. 保留所有权利."]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[84,685,411,358],()=>s(845)),_N_E=e.O()}]);